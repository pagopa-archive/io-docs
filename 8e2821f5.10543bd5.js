(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{65:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),o=n(6),r=(n(0),n(75)),i={title:"Development workflow"},s={unversionedId:"io-handbook/development-workflow",id:"io-handbook/development-workflow",isDocsHomePage:!1,title:"Development workflow",description:"Design",source:"@site/docs/io-handbook/development-workflow.md",slug:"/io-handbook/development-workflow",permalink:"/io-docs/io-handbook/development-workflow",editUrl:"https://github.com/pagopa/io-docs/edit/main/docs/io-handbook/development-workflow.md",version:"current",sidebar:"docs",previous:{title:"Who does what?",permalink:"/io-docs/io-handbook/who-does-what"},next:{title:"Development guidelines",permalink:"/io-docs/io-handbook/development-guidelines"}},l=[{value:"Design",id:"design",children:[]},{value:"Writing stories",id:"writing-stories",children:[]},{value:"Pull Requests",id:"pull-requests",children:[]},{value:"Code Reviews",id:"code-reviews",children:[]},{value:"Templates",id:"templates",children:[]}],c={rightToc:l};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h3",{id:"design"},"Design"),Object(r.b)("p",null,"To thoroughly analyze and discuss non-trivial decisions or features, we rely\non collaborative document editing, taking several iterations of proposals and\nfeedbacks before the actual planning and implementation."),Object(r.b)("h4",{id:"rfcs"},"RFCs"),Object(r.b)("p",null,"Macro changes that impact the software and system architecture such as logging,\nauthentication, integration between components and 3rd party systems, format and\nstructure of data etc. must be initially outlined in a document (",Object(r.b)("em",{parentName:"p"},"RFC"),") that is\nshared and discussed with the rest of the team. RFCs are also useful for describing\nhigh-level activities not necessarily related to software development - for example:\ntopics related to the legal aspects of the project or the interaction with public subjects."),Object(r.b)("p",null,"For hystorical reasons old RFCs are called CDMs (",Object(r.b)("em",{parentName:"p"},"Cittadinanza Digitale Memos"),")\nand are stored in a publicly accessible folder named ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://drive.google.com/drive/folders/1nmPZqEzH9aN_5qFJbd36vS3v7leUcJx0"}),"CDM"),"\nin the Digital Team Google Drive."),Object(r.b)("p",null,"All team members are invited to write new RFCs and comment the existing ones."),Object(r.b)("h5",{id:"creating-a-new-rfc"},"Creating a new RFC"),Object(r.b)("p",null,"New RFC documents must be named ",Object(r.b)("inlineCode",{parentName:"p"},"IO-RFC-{n} - {title}")," where ",Object(r.b)("inlineCode",{parentName:"p"},"n")," is an incremental\nnumber (one plus the highest memo in the RFC folder) and ",Object(r.b)("inlineCode",{parentName:"p"},"title")," is a short title\ndescribing the proposal (when in doubt try to be consistent with the current RFCs\nor ask advice in the ",Object(r.b)("inlineCode",{parentName:"p"},"#dev_io")," channel)."),Object(r.b)("p",null,"When writing an RFC, assume that the reader knows almost nothing about the context,\nthe issues and the reasons that motivate any eventual implementation proposal."),Object(r.b)("p",null,"We currently write RFCs in the Italian language\n(but if you feel like writing in English, you are welcome to do so)."),Object(r.b)("p",null,"The RFC should be roughly structured as following:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"A title (same as the name of the document)"),Object(r.b)("li",{parentName:"ul"},"Author"),Object(r.b)("li",{parentName:"ul"},"Current state of the document (i.e. work in progress, waiting for review, planned, implemented)"),Object(r.b)("li",{parentName:"ul"},"A ",Object(r.b)("em",{parentName:"li"},"Context")," (",Object(r.b)("em",{parentName:"li"},"Contesto"),") section where we explain why the document has been written (i.e. the starting point, the need, the current state of things)"),Object(r.b)("li",{parentName:"ul"},"A ",Object(r.b)("em",{parentName:"li"},"Proposal")," (",Object(r.b)("em",{parentName:"li"},"Proposta"),") section where we explain what the RFC is proposing to implement or change,\nhow this proposal solves a certain need or problem and (if applicable) what are the effects on other systems.")),Object(r.b)("h5",{id:"asking-for-feedback"},"Asking for feedback"),Object(r.b)("p",null,"Once the first draft has been completed, the author shares the document with the\nteam in the ",Object(r.b)("inlineCode",{parentName:"p"},"#dev_io")," Slack channel, asking for feedback and/or tagging\nsome key stakeholder (ie. the CTO) using Google Docs comments feature."),Object(r.b)("p",null,"There may be several iterations of feedbacks/comments and updates."),Object(r.b)("h5",{id:"implementation"},"Implementation"),Object(r.b)("p",null,"Once a RFC is finalized and approved for implementation, it must be translated\ninto development stories that get added to the backlog of each affected component."),Object(r.b)("h4",{id:"architecture-decision-records"},"Architecture Decision Records"),Object(r.b)("p",null,"For registering architectural decisions we rely on ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/joelparkerhenderson/architecture_decision_record#architecture-decision-record-adr"}),"Architecture Decision Records")," (ADR):"),Object(r.b)("p",null,"See the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/teamdigitale/digital-citizenship/tree/master/architecture/decisions"}),"ADRs repository"),"."),Object(r.b)("h3",{id:"writing-stories"},"Writing stories"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Always ",Object(r.b)("strong",{parentName:"li"},"create")," a story for things you work on. If it is worth spending time on, it is worth creating a story since that enables other people to learn and help. You can always edit the description or close it when the problem changed to something different or was solved. ",Object(r.b)("em",{parentName:"li"},"(TODO: link to Pivotal projects)")),Object(r.b)("li",{parentName:"ol"},'Always start with the "',Object(r.b)("strong",{parentName:"li"},"why"),'" not with the "how": not every solution will solve the problem at hand. Keep discussions focused by ',Object(r.b)("strong",{parentName:"li"},"defining the problem first"),". Also, don't rush to the first solution it comes to mind, unless the solution is obvious, try to propose multiple options and ask advice from business and product team-mates if needed."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("strong",{parentName:"li"},"Double link")," stories with related conversations. E.g. if there\u2019s an Instabug ticket that causes you to open a story on Pivotal Tracker, make sure to document the story link in the Instabug issue and vice versa. The same states for notable slack conversations."),Object(r.b)("li",{parentName:"ol"},"If two stories are related, ",Object(r.b)("strong",{parentName:"li"},"crosslink")," them (a link from each story to the other one). When a story blocks another story, use the blockers feature of Pivotal Tracker."),Object(r.b)("li",{parentName:"ol"},"After a discussion about a feature ",Object(r.b)("strong",{parentName:"li"},"update the story description")," with the consensus or final conclusions. This makes it much easier to see the current state of a story for everyone involved in the implementation and prevents confusion and discussion later on."),Object(r.b)("li",{parentName:"ol"},"Submit the ",Object(r.b)("strong",{parentName:"li"},"smallest")," item of work that makes sense. When creating a story describe the smallest fix possible, put suggestions for enhancements in separate stories and link them."),Object(r.b)("li",{parentName:"ol"},"Do not leave stories open for a long time, stories should be actionable and realistic. If you are assigned to a story but don't have time to work on it, assign it to someone else or move it to the ",Object(r.b)("em",{parentName:"li"},"icebox"),'. Consider removing idle stories from the "Started" state to not compromise velocity auto-computation.'),Object(r.b)("li",{parentName:"ol"},"Make a conscious effort to prioritize your work. The priority of items depends on multiple factors: Is someone waiting for the answer? What is the impact if you delay it? How many people does it affect, etc.? This is detailed in Engineering Workflow. ",Object(r.b)("em",{parentName:"li"},"(TODO: link to engineering workflow)")),Object(r.b)("li",{parentName:"ol"},"Pick stories from the top of the backlog."),Object(r.b)("li",{parentName:"ol"},"Assign a story to yourself as soon as you start to work on it, but not before that time. If you complete part of a story and need someone else to take the next step, ",Object(r.b)("strong",{parentName:"li"},"re-assign")," the story to that person."),Object(r.b)("li",{parentName:"ol"},"When re-assigning a story, make sure that the story description contains the latest information. The story description should be the ",Object(r.b)("strong",{parentName:"li"},"single source of truth"),"."),Object(r.b)("li",{parentName:"ol"},"Do not Accept stories about changes not yet deployed into production. Do not close a story until it is really ",Object(r.b)("strong",{parentName:"li"},"done"),"."),Object(r.b)("li",{parentName:"ol"},'When closing a "wont-fix" story (use the label!) leave a comment explaining why you are closing it.')),Object(r.b)("h4",{id:"stories-guidelines"},"Stories Guidelines"),Object(r.b)("h5",{id:"story-types"},"Story Types"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"features"),": stories that provide verifiable value to the user. They have a story point estimate. Use the form ",Object(r.b)("inlineCode",{parentName:"li"},"As <type of user> I want to <some goal> so that <some reason>")," for features stories."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"chores"),": stories that are necessary but provide no direct, obvious value to the user. They don\u2019t require extra validation when they\u2019re finished, so the states for chores are just ",Object(r.b)("em",{parentName:"li"},"unstarted"),", ",Object(r.b)("em",{parentName:"li"},"started"),", and ",Object(r.b)("em",{parentName:"li"},"accepted"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"bugs"),": unintended behavior that can be related to features. Bugs have the same states as ",Object(r.b)("em",{parentName:"li"},"features"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"releases"),": milestone markers that allow your team to track progress toward concrete goals. Releases only have unstarted and accepted states.")),Object(r.b)("p",null,"Titles / descriptions must be:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Understandable")," the story or its related description must provide all the necessary information in order to be understood by everyone working on the project with minimal information about the context"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Friendly")," put implementation details into the story description")),Object(r.b)("p",null,"Stories must be:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Independent")," (can be built separately to other stories)"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Negotiable")," (requirements can be adapted)"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Valuable")," (provides benefit to the end-user)"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Estimable")," (to reasonable accuracy)"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Small")," (can be built within one iteration)"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Testable")," (can be verified by QA)")),Object(r.b)("p",null,"see ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://medium.com/tribalscale/writing-technical-user-stories-434bf96f1dd5"}),"https://medium.com/tribalscale/writing-technical-user-stories-434bf96f1dd5")),Object(r.b)("h5",{id:"stories-examples"},"Stories examples"),Object(r.b)("p",null,"Bad: ",Object(r.b)("em",{parentName:"p"},"Implement login screen"),Object(r.b)("br",{parentName:"p"}),"\n","Good: ",Object(r.b)("em",{parentName:"p"},"As an Author I want to be able to login in order to start edit the content")),Object(r.b)("p",null,"Bad: ",Object(r.b)("em",{parentName:"p"},"Create a modal to show errors"),Object(r.b)("br",{parentName:"p"}),"\n","Good: ",Object(r.b)("em",{parentName:"p"},"As an Editor I want to be notified in case some error occurs in order to plan a retry")),Object(r.b)("p",null,"..."),Object(r.b)("h5",{id:"story-states"},"Story States"),Object(r.b)("p",null,"Features and bugs have the following states:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Unscheduled"),": this are stories in the Icebox, there's no plan to fix them soon."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Unstarted"),": development on this story hasn't started yet."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Started"),": development has started."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Finished"),": the relative Pull Request is merged into master."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Delivered"),": Pull Request is deployed into production."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Accepted"),": the fix has solved the issue, the story is closed."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"Rejected"),": doesn't meet the acceptance criteria according to the user or product owner, a new fix is needed.")),Object(r.b)("h5",{id:"story-points"},"Story Points"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"0 points")," \u2013 it's super simple and I'm sure I can do it in minutes."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"1 point")," \u2013 I already know how to complete this story. It looks easy and it should be quick"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"2 points")," \u2013 I'm not sure. There might be something I don't know how to do and/or unforeseen events"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"3 points")," \u2013 it's complex and I need to figure out what to do.")),Object(r.b)("h3",{id:"pull-requests"},"Pull Requests"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Start the related story."),Object(r.b)("li",{parentName:"ol"},"Create a new feature branch, the name should be meaningful, e.g: ",Object(r.b)("inlineCode",{parentName:"li"},"12345-fix-payment-button")," where ",Object(r.b)("inlineCode",{parentName:"li"},"12345")," is the Pivotal story ID."),Object(r.b)("li",{parentName:"ol"},"Make your changes in the branch and commit using descriptive messages (see below for guidelines on commit messages). Prepend the commit message with the Story # you're working on. Example: ",Object(r.b)("inlineCode",{parentName:"li"},"[#12345] Fixes payment button"),"."),Object(r.b)("li",{parentName:"ol"},"Push the branch: ",Object(r.b)("inlineCode",{parentName:"li"},"git push -u origin 12345-fix-payment-button"),"."),Object(r.b)("li",{parentName:"ol"},"Create a pull request from your branch."),Object(r.b)("li",{parentName:"ol"},"Prepend the pull request title with the Story #. Examples: ",Object(r.b)("inlineCode",{parentName:"li"},"[#12345] Fixes payment button"),"."),Object(r.b)("li",{parentName:"ol"},"If the Pull Request is still a work in progress, create a ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.blog/2019-02-14-introducing-draft-pull-requests/"}),"draft pull request"),"."),Object(r.b)("li",{parentName:"ol"},"Add at least one human reviewer to your story."),Object(r.b)("li",{parentName:"ol"},"Attach the Pull Request to the story by clicking on the ",Object(r.b)("em",{parentName:"li"},"Attach from Github")," link in the story page and pasting the PR URL."),Object(r.b)("li",{parentName:"ol"},"Press Finish on the story on Pivotal Tracker."),Object(r.b)("li",{parentName:"ol"},"Wait for at least one of the human reviewer to review the change."),Object(r.b)("li",{parentName:"ol"},"Update the master branch within your local repository with ",Object(r.b)("inlineCode",{parentName:"li"},"git checkout master")," and ",Object(r.b)("inlineCode",{parentName:"li"},"git pull"),". If you have other branches that need to be updated, then run also: ",Object(r.b)("inlineCode",{parentName:"li"},"git checkout other-branch")," and ",Object(r.b)("inlineCode",{parentName:"li"},"git pull --rebase . master"),". Note that subsequent pushes for these branches will require a ",Object(r.b)("inlineCode",{parentName:"li"},"-f"),"\nsince history has been rewritten by rebasing."),Object(r.b)("li",{parentName:"ol"},"Create a new relase of the packages using ",Object(r.b)("inlineCode",{parentName:"li"},"yarn release-it <patch|minor|major>")),Object(r.b)("li",{parentName:"ol"},"Deploy, or wait for someone to deploy the newly written code."),Object(r.b)("li",{parentName:"ol"},"Once deployed press ",Object(r.b)("inlineCode",{parentName:"li"},"Deliver")," on the story on Pivotal Tracker."),Object(r.b)("li",{parentName:"ol"},"Based on how it goes the story will be accepted or rejected.")),Object(r.b)("h3",{id:"code-reviews"},"Code Reviews"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Every developer should spend from 30min to 1h each day on code reviews."),Object(r.b)("li",{parentName:"ol"},"Each PR should be as small as possible: the general guideline is to create pull requests ranging from 200 to 400 lines of code, not more."),Object(r.b)("li",{parentName:"ol"},"Include explanation comments in the PR: this can help the reviewers in making the review faster. At the same time try to be succinct, not verbose, comments should have a high informational density."),Object(r.b)("li",{parentName:"ol"},"Ask for feedback early by creating ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.blog/2019-02-14-introducing-draft-pull-requests/"}),"draft pull requests"),". This can shorten dramatically approval and review time.")),Object(r.b)("h3",{id:"templates"},"Templates"),Object(r.b)("p",null,"When you need to create a new project repository, use a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/"}),"repository template"),". Here are the available templates:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/teamdigitale/io-template-typescript"}),"io-template-typescript"),": For nodejs/Typescript projects")))}b.isMDXComponent=!0},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),b=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=b(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=b(n),d=a,u=p["".concat(i,".").concat(d)]||p[d]||m[d]||r;return n?o.a.createElement(u,s(s({ref:t},c),{},{components:n})):o.a.createElement(u,s({ref:t},c))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);