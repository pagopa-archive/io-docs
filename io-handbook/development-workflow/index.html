<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Development workflow | IO Docs</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Development workflow | IO Docs"><meta data-react-helmet="true" name="description" content="Design"><meta data-react-helmet="true" property="og:description" content="Design"><meta data-react-helmet="true" property="og:url" content="https://pagopa.github.io/io-docs/io-handbook/development-workflow"><link data-react-helmet="true" rel="shortcut icon" href="/io-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pagopa.github.io/io-docs/io-handbook/development-workflow"><link rel="stylesheet" href="/io-docs/styles.633e5506.css">
<link rel="preload" href="/io-docs/styles.39dbcb21.js" as="script">
<link rel="preload" href="/io-docs/runtime~main.7eeba732.js" as="script">
<link rel="preload" href="/io-docs/main.66f7d0fd.js" as="script">
<link rel="preload" href="/io-docs/1.8c6a6f73.js" as="script">
<link rel="preload" href="/io-docs/2.33525e0b.js" as="script">
<link rel="preload" href="/io-docs/19.5b07d016.js" as="script">
<link rel="preload" href="/io-docs/935f2afb.9c57c116.js" as="script">
<link rel="preload" href="/io-docs/17896441.d06ffa39.js" as="script">
<link rel="preload" href="/io-docs/8e2821f5.38f08e4e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/io-docs/"><img class="navbar__logo" src="/io-docs/img/logo.svg" alt="IO logo"><strong class="navbar__title">IO Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://io.italia.it" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">IO</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/io-docs/"><img class="navbar__logo" src="/io-docs/img/logo.svg" alt="IO logo"><strong class="navbar__title">IO Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://io.italia.it" target="_blank" rel="noopener noreferrer" class="menu__link">IO</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/io-docs/">Table of contents</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Handbook</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/index">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/general">General Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/how-to">How to use this handbook</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/communication">Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/learning">Learning and knowledge sharing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/who-does-what">Who does what?</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/io-docs/io-handbook/development-workflow">Development workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/development-guidelines">Development guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/development-styleguide">Development styleguide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/typescript-compiler-issues">Typescript compiler issues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/io-docs/io-handbook/program">Program management</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Development workflow</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="design"></a>Design<a aria-hidden="true" tabindex="-1" class="hash-link" href="#design" title="Direct link to heading">#</a></h3><p>To thoroughly analyze and discuss non-trivial decisions or features, we rely
on collaborative document editing, taking several iterations of proposals and
feedbacks before the actual planning and implementation.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="rfcs"></a>RFCs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rfcs" title="Direct link to heading">#</a></h4><p>Macro changes that impact the software and system architecture such as logging,
authentication, integration between components and 3rd party systems, format and
structure of data etc. must be initially outlined in a document (<em>RFC</em>) that is
shared and discussed with the rest of the team. RFCs are also useful for describing
high-level activities not necessarily related to software development - for example:
topics related to the legal aspects of the project or the interaction with public subjects.</p><p>For hystorical reasons old RFCs are called CDMs (<em>Cittadinanza Digitale Memos</em>)
and are stored in a publicly accessible folder named <a href="https://drive.google.com/drive/folders/1nmPZqEzH9aN_5qFJbd36vS3v7leUcJx0" target="_blank" rel="noopener noreferrer">CDM</a>
in the Digital Team Google Drive.</p><p>All team members are invited to write new RFCs and comment the existing ones.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="creating-a-new-rfc"></a>Creating a new RFC<a aria-hidden="true" tabindex="-1" class="hash-link" href="#creating-a-new-rfc" title="Direct link to heading">#</a></h5><p>New RFC documents must be named <code>IO-RFC-{n} - {title}</code> where <code>n</code> is an incremental
number (one plus the highest memo in the RFC folder) and <code>title</code> is a short title
describing the proposal (when in doubt try to be consistent with the current RFCs
or ask advice in the <code>#dev_io</code> channel).</p><p>When writing an RFC, assume that the reader knows almost nothing about the context,
the issues and the reasons that motivate any eventual implementation proposal.</p><p>We currently write RFCs in the Italian language
(but if you feel like writing in English, you are welcome to do so).</p><p>The RFC should be roughly structured as following:</p><ul><li>A title (same as the name of the document)</li><li>Author</li><li>Current state of the document (i.e. work in progress, waiting for review, planned, implemented)</li><li>A <em>Context</em> (<em>Contesto</em>) section where we explain why the document has been written (i.e. the starting point, the need, the current state of things)</li><li>A <em>Proposal</em> (<em>Proposta</em>) section where we explain what the RFC is proposing to implement or change,
how this proposal solves a certain need or problem and (if applicable) what are the effects on other systems.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="asking-for-feedback"></a>Asking for feedback<a aria-hidden="true" tabindex="-1" class="hash-link" href="#asking-for-feedback" title="Direct link to heading">#</a></h5><p>Once the first draft has been completed, the author shares the document with the
team in the <code>#dev_io</code> Slack channel, asking for feedback and/or tagging
some key stakeholder (ie. the CTO) using Google Docs comments feature.</p><p>There may be several iterations of feedbacks/comments and updates.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="implementation"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation" title="Direct link to heading">#</a></h5><p>Once a RFC is finalized and approved for implementation, it must be translated
into development stories that get added to the backlog of each affected component.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="architecture-decision-records"></a>Architecture Decision Records<a aria-hidden="true" tabindex="-1" class="hash-link" href="#architecture-decision-records" title="Direct link to heading">#</a></h4><p>For registering architectural decisions we rely on <a href="https://github.com/joelparkerhenderson/architecture_decision_record#architecture-decision-record-adr" target="_blank" rel="noopener noreferrer">Architecture Decision Records</a> (ADR):</p><p>See the <a href="https://github.com/pagopa/digital-citizenship/tree/master/architecture/decisions" target="_blank" rel="noopener noreferrer">ADRs repository</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="writing-stories"></a>Writing stories<a aria-hidden="true" tabindex="-1" class="hash-link" href="#writing-stories" title="Direct link to heading">#</a></h3><ol><li>Always <strong>create</strong> a story for things you work on. If it is worth spending time on, it is worth creating a story since that enables other people to learn and help. You can always edit the description or close it when the problem changed to something different or was solved. <em>(TODO: link to Pivotal projects)</em></li><li>Always start with the &quot;<strong>why</strong>&quot; not with the &quot;how&quot;: not every solution will solve the problem at hand. Keep discussions focused by <strong>defining the problem first</strong>. Also, don&#x27;t rush to the first solution it comes to mind, unless the solution is obvious, try to propose multiple options and ask advice from business and product team-mates if needed.</li><li><strong>Double link</strong> stories with related conversations. E.g. if thereâ€™s an Instabug ticket that causes you to open a story on Pivotal Tracker, make sure to document the story link in the Instabug issue and vice versa. The same states for notable slack conversations.</li><li>If two stories are related, <strong>crosslink</strong> them (a link from each story to the other one). When a story blocks another story, use the blockers feature of Pivotal Tracker.</li><li>After a discussion about a feature <strong>update the story description</strong> with the consensus or final conclusions. This makes it much easier to see the current state of a story for everyone involved in the implementation and prevents confusion and discussion later on.</li><li>Submit the <strong>smallest</strong> item of work that makes sense. When creating a story describe the smallest fix possible, put suggestions for enhancements in separate stories and link them.</li><li>Do not leave stories open for a long time, stories should be actionable and realistic. If you are assigned to a story but don&#x27;t have time to work on it, assign it to someone else or move it to the <em>icebox</em>. Consider removing idle stories from the &quot;Started&quot; state to not compromise velocity auto-computation.</li><li>Make a conscious effort to prioritize your work. The priority of items depends on multiple factors: Is someone waiting for the answer? What is the impact if you delay it? How many people does it affect, etc.? This is detailed in Engineering Workflow. <em>(TODO: link to engineering workflow)</em></li><li>Pick stories from the top of the backlog.</li><li>Assign a story to yourself as soon as you start to work on it, but not before that time. If you complete part of a story and need someone else to take the next step, <strong>re-assign</strong> the story to that person.</li><li>When re-assigning a story, make sure that the story description contains the latest information. The story description should be the <strong>single source of truth</strong>.</li><li>Do not Accept stories about changes not yet deployed into production. Do not close a story until it is really <strong>done</strong>.</li><li>When closing a &quot;wont-fix&quot; story (use the label!) leave a comment explaining why you are closing it.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stories-guidelines"></a>Stories Guidelines<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stories-guidelines" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="story-types"></a>Story Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#story-types" title="Direct link to heading">#</a></h5><ul><li><strong>features</strong>: stories that provide verifiable value to the user. They have a story point estimate. Use the form <code>As &lt;type of user&gt; I want to &lt;some goal&gt; so that &lt;some reason&gt;</code> for features stories.</li><li><strong>chores</strong>: stories that are necessary but provide no direct, obvious value to the user. They donâ€™t require extra validation when theyâ€™re finished, so the states for chores are just <em>unstarted</em>, <em>started</em>, and <em>accepted</em>.</li><li><strong>bugs</strong>: unintended behavior that can be related to features. Bugs have the same states as <em>features</em>.</li><li><strong>releases</strong>: milestone markers that allow your team to track progress toward concrete goals. Releases only have unstarted and accepted states.</li></ul><p>Titles / descriptions must be:</p><ul><li><strong>Understandable</strong> the story or its related description must provide all the necessary information in order to be understood by everyone working on the project with minimal information about the context</li><li><strong>Friendly</strong> put implementation details into the story description</li></ul><p>Stories must be:</p><ul><li><strong>Independent</strong> (can be built separately to other stories)</li><li><strong>Negotiable</strong> (requirements can be adapted)</li><li><strong>Valuable</strong> (provides benefit to the end-user)</li><li><strong>Estimable</strong> (to reasonable accuracy)</li><li><strong>Small</strong> (can be built within one iteration)</li><li><strong>Testable</strong> (can be verified by QA)</li></ul><p>see <a href="https://medium.com/tribalscale/writing-technical-user-stories-434bf96f1dd5" target="_blank" rel="noopener noreferrer">https://medium.com/tribalscale/writing-technical-user-stories-434bf96f1dd5</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stories-examples"></a>Stories examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stories-examples" title="Direct link to heading">#</a></h5><p>Bad: <em>Implement login screen</em><br>
Good: <em>As an Author I want to be able to login in order to start edit the content</em></p><p>Bad: <em>Create a modal to show errors</em><br>
Good: <em>As an Editor I want to be notified in case some error occurs in order to plan a retry</em></p><p>...</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="story-states"></a>Story States<a aria-hidden="true" tabindex="-1" class="hash-link" href="#story-states" title="Direct link to heading">#</a></h5><p>Features and bugs have the following states:</p><ul><li><em>Unscheduled</em>: this are stories in the Icebox, there&#x27;s no plan to fix them soon.</li><li><em>Unstarted</em>: development on this story hasn&#x27;t started yet.</li><li><em>Started</em>: development has started.</li><li><em>Finished</em>: the relative Pull Request is merged into master.</li><li><em>Delivered</em>: Pull Request is deployed into production.</li><li><em>Accepted</em>: the fix has solved the issue, the story is closed.</li><li><em>Rejected</em>: doesn&#x27;t meet the acceptance criteria according to the user or product owner, a new fix is needed.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="story-points"></a>Story Points<a aria-hidden="true" tabindex="-1" class="hash-link" href="#story-points" title="Direct link to heading">#</a></h5><ul><li><strong>0 points</strong> â€“ it&#x27;s super simple and I&#x27;m sure I can do it in minutes.</li><li><strong>1 point</strong> â€“ I already know how to complete this story. It looks easy and it should be quick</li><li><strong>2 points</strong> â€“ I&#x27;m not sure. There might be something I don&#x27;t know how to do and/or unforeseen events</li><li><strong>3 points</strong> â€“ it&#x27;s complex and I need to figure out what to do.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pull-requests"></a>Pull Requests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pull-requests" title="Direct link to heading">#</a></h3><ol><li>Start the related story.</li><li>Create a new feature branch, the name should be meaningful, e.g: <code>12345-fix-payment-button</code> where <code>12345</code> is the Pivotal story ID.</li><li>Make your changes in the branch and commit using descriptive messages (see below for guidelines on commit messages). Prepend the commit message with the Story # you&#x27;re working on. Example: <code>[#12345] Fixes payment button</code>.</li><li>Push the branch: <code>git push -u origin 12345-fix-payment-button</code>.</li><li>Create a pull request from your branch.</li><li>Prepend the pull request title with the Story #. Examples: <code>[#12345] Fixes payment button</code>.</li><li>If the Pull Request is still a work in progress, create a <a href="https://github.blog/2019-02-14-introducing-draft-pull-requests/" target="_blank" rel="noopener noreferrer">draft pull request</a>.</li><li>Add at least one human reviewer to your story.</li><li>Attach the Pull Request to the story by clicking on the <em>Attach from Github</em> link in the story page and pasting the PR URL.</li><li>Press Finish on the story on Pivotal Tracker.</li><li>Wait for at least one of the human reviewer to review the change.</li><li>Update the master branch within your local repository with <code>git checkout master</code> and <code>git pull</code>. If you have other branches that need to be updated, then run also: <code>git checkout other-branch</code> and <code>git pull --rebase . master</code>. Note that subsequent pushes for these branches will require a <code>-f</code>
since history has been rewritten by rebasing.</li><li>Create a new relase of the packages using <code>yarn release-it &lt;patch|minor|major&gt;</code></li><li>Deploy, or wait for someone to deploy the newly written code.</li><li>Once deployed press <code>Deliver</code> on the story on Pivotal Tracker.</li><li>Based on how it goes the story will be accepted or rejected.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="code-reviews"></a>Code Reviews<a aria-hidden="true" tabindex="-1" class="hash-link" href="#code-reviews" title="Direct link to heading">#</a></h3><ol><li>Every developer should spend from 30min to 1h each day on code reviews.</li><li>Each PR should be as small as possible: the general guideline is to create pull requests ranging from 200 to 400 lines of code, not more.</li><li>Include explanation comments in the PR: this can help the reviewers in making the review faster. At the same time try to be succinct, not verbose, comments should have a high informational density.</li><li>Ask for feedback early by creating <a href="https://github.blog/2019-02-14-introducing-draft-pull-requests/" target="_blank" rel="noopener noreferrer">draft pull requests</a>. This can shorten dramatically approval and review time.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="templates"></a>Templates<a aria-hidden="true" tabindex="-1" class="hash-link" href="#templates" title="Direct link to heading">#</a></h3><p>When you need to create a new project repository, use a <a href="https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/" target="_blank" rel="noopener noreferrer">repository template</a>. Here are the available templates:</p><ul><li><a href="https://github.com/pagopa/io-template-typescript" target="_blank" rel="noopener noreferrer">io-template-typescript</a>: For nodejs/Typescript projects</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/pagopa/io-docs/edit/main/docs/io-handbook/development-workflow.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/io-docs/io-handbook/who-does-what"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Who does what?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/io-docs/io-handbook/development-guidelines"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Development guidelines Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#design" class="table-of-contents__link">Design</a></li><li><a href="#writing-stories" class="table-of-contents__link">Writing stories</a></li><li><a href="#pull-requests" class="table-of-contents__link">Pull Requests</a></li><li><a href="#code-reviews" class="table-of-contents__link">Code Reviews</a></li><li><a href="#templates" class="table-of-contents__link">Templates</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">IO</h4><ul class="footer__items"><li class="footer__item"><a href="https://io.italia.it" target="_blank" rel="noopener noreferrer" class="footer__link-item">IO project</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 PagoPA S.p.a.</div></div></div></footer></div>
<script src="/io-docs/styles.39dbcb21.js"></script>
<script src="/io-docs/runtime~main.7eeba732.js"></script>
<script src="/io-docs/main.66f7d0fd.js"></script>
<script src="/io-docs/1.8c6a6f73.js"></script>
<script src="/io-docs/2.33525e0b.js"></script>
<script src="/io-docs/19.5b07d016.js"></script>
<script src="/io-docs/935f2afb.9c57c116.js"></script>
<script src="/io-docs/17896441.d06ffa39.js"></script>
<script src="/io-docs/8e2821f5.38f08e4e.js"></script>
</body>
</html>